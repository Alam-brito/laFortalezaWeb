import{C as I,r as p,z as S,c as s,a as r,h as j,t as n,d as w,w as q,l as i,v,u,I as g,F as b,k as c,J as y,o as l}from"./app-BBDfuzFB.js";const E={class:"bg-gray-50 dark:bg-gray-900 p-8"},M={class:"flex flex-col items-center justify-top px-6 py-8 mx-auto min-h-screen overflow-y-auto"},P={class:"w-full bg-white rounded-lg shadow dark:border md:mt-0 sm:max-w-md xl:p-0 dark:bg-gray-800 dark:border-gray-700"},_={class:"p-6 space-y-4 md:space-y-6 sm:p-8"},N={key:0,class:"bg-green-100 border border-green-400 text-green-700 px-4 py-2 rounded mb-4"},B=["value"],L=["onUpdate:modelValue"],T=["value"],z=["onUpdate:modelValue"],D=["value"],F=["onUpdate:modelValue"],G=["onClick"],O={__name:"Crear",setup(H){const o=I({tipo:"ingreso",glosa:"",productos:[{id_producto:"",id_almacen:"",cantidad:""}]}),k=p([]),m=p([]),f=p([]),h=async()=>{k.value=await y.get(route("ruta.categorias")).then(a=>a.data),f.value=await y.get(route("ruta.almacenes")).then(a=>a.data)},V=async a=>{a?m.value=await y.get(route("ruta.productos",a)).then(e=>e.data):m.value=[]};S(()=>o.categoriaId,a=>{V(a)}),h();const A=()=>{o.productos.push({id_producto:"",id_almacen:"",cantidad:""})},C=a=>{o.productos.length>1&&o.productos.splice(a,1)},U=()=>{o.post(route("admin.inventarios.ajustar"),{onSuccess:()=>{o.reset(),alert("Ajuste realizado correctamente.")},onError:a=>{console.error("Errores:",a)}})};return(a,e)=>(l(),s("section",E,[r("div",M,[r("div",P,[r("div",_,[e[15]||(e[15]=r("p",{class:"flex items-center text-2xl font-semibold text-gray-900 dark:text-white"},[r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-8"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})]),j(" INVENTARIOS ")],-1)),a.successMessage?(l(),s("div",N,n(a.successMessage),1)):w("",!0),r("form",{onSubmit:q(U,["prevent"]),class:"space-y-4 md:space-y-2 dark:bg-gray-800",action:"#"},[e[11]||(e[11]=r("h3",{class:"mt-4 font-semibold"},"Productos a Ajustar:",-1)),e[12]||(e[12]=r("label",{class:"block mb-1 text-sm font-medium text-gray-900 dark:text-white"},"Glosa:",-1)),i(r("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>u(o).glosa=t),placeholder:"Ingrese la glosa",required:"",class:"bg-gray-50 border border-gray-300 text-gray-900 rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},null,512),[[v,u(o).glosa]]),e[13]||(e[13]=r("label",{for:"categoria",class:"block mb-1 text-sm font-medium text-gray-900 dark:text-white"},"Categoría:",-1)),i(r("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>u(o).categoriaId=t),id:"categoria",required:"",class:"bg-gray-50 border border-gray-300 text-gray-900 rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},[e[3]||(e[3]=r("option",{value:"",disabled:""},"Selecciona una categoria",-1)),(l(!0),s(b,null,c(k.value,t=>(l(),s("option",{key:t.id,value:t.id},n(t.nombre),9,B))),128))],512),[[g,u(o).categoriaId]]),r("div",null,[e[5]||(e[5]=r("label",{class:"block mb-1 text-sm font-medium text-gray-900 dark:text-white"},"Tipo de ajuste:",-1)),i(r("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>u(o).tipo=t),required:"",class:"bg-gray-50 border border-gray-300 text-gray-900 rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},e[4]||(e[4]=[r("option",{value:"ingreso"},"Ingreso",-1),r("option",{value:"egreso"},"Egreso",-1)]),512),[[g,u(o).tipo]])]),(l(!0),s(b,null,c(u(o).productos,(t,x)=>(l(),s("div",{key:x,class:"border p-4 rounded-lg mb-2 bg-gray-100 dark:bg-gray-800"},[e[8]||(e[8]=r("label",{class:"block mb-1 text-sm font-medium text-gray-900 dark:text-white"},"Producto:",-1)),i(r("select",{"onUpdate:modelValue":d=>t.id_producto=d,required:"",class:"bg-gray-50 border border-gray-300 text-gray-900 rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},[e[6]||(e[6]=r("option",{value:"",disabled:""},"Selecciona un producto",-1)),(l(!0),s(b,null,c(m.value,d=>(l(),s("option",{key:d.id,value:d.id},n(d.nombre),9,T))),128))],8,L),[[g,t.id_producto]]),e[9]||(e[9]=r("label",{class:"block mt-2 mb-1 text-sm font-medium text-gray-900 dark:text-white"},"Almacén:",-1)),i(r("select",{"onUpdate:modelValue":d=>t.id_almacen=d,required:"",class:"bg-gray-50 border border-gray-300 text-gray-900 rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},[e[7]||(e[7]=r("option",{value:"",disabled:""},"Selecciona un almacén",-1)),(l(!0),s(b,null,c(f.value,d=>(l(),s("option",{key:d.id,value:d.id},n(d.nombre),9,D))),128))],8,z),[[g,t.id_almacen]]),e[10]||(e[10]=r("label",{class:"block mt-2 mb-1 text-sm font-medium text-gray-900 dark:text-white"},"Cantidad:",-1)),i(r("input",{type:"number","onUpdate:modelValue":d=>t.cantidad=d,min:"1",required:"",class:"bg-gray-50 border border-gray-300 text-gray-900 rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},null,8,F),[[v,t.cantidad]]),u(o).productos.length>1?(l(),s("button",{key:0,type:"button",onClick:d=>C(x),class:"mt-2 bg-red-500 text-white px-4 py-2 rounded hover:bg-red-700"}," Eliminar ",8,G)):w("",!0)]))),128)),r("button",{type:"button",onClick:A,class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-700"}," Agregar Producto "),e[14]||(e[14]=r("button",{type:"submit",class:"w-full mt-4 bg-lime-600 text-white px-5 py-2.5 rounded-lg"}," Guardar Ajuste ",-1))],32)])])])]))}};export{O as default};
