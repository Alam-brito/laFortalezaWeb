import{i as $,C as I,r as c,j as g,c as a,b as d,f as p,t as b,d as y,a as t,F as T,k as D,u as l,o as n,l as k,v as w,h as x,w as F}from"./app-DDpxVrWO.js";import{d as h}from"./index-DTOQRBj7.js";const P={class:"relative overflow-x-auto shadow-md sm:rounded-lg h-screen"},Z={class:"relative z-0 w-full mb-5 group"},G={class:"relative z-0 w-full mb-5 group"},J={class:"relative z-0 w-full mb-5 group"},K={key:0},O=["src"],Q={class:"relative z-0 w-full mb-3 group dark:bg-gray-900"},R={type:"submit",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},W={key:0,class:"bg-green-100 border border-green-400 text-green-700 px-4 py-2 rounded mb-4"},X={class:"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400"},Y={class:"text-xs text-black-700 uppercase bg-blue-50 dark:bg-gray-700 dark:text-gray-400"},ee={class:"px-6 py-4"},te={scope:"row",class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"},oe={class:"px-6 py-4"},re={class:"px-6 py-4"},se={class:"text-black text-black-700 px-4 py-3"},le={key:0,class:"max-w-lg"},ae=["src"],ne={key:1},ie={class:"px-6 py-4"},de={class:"px-6 py-4"},me={__name:"ListaServicios",setup(ue){const V=$().props.servicios,o=I({id:null,nombre:"",descripcion:"",precio:"",imagen:null}),i=c(""),C=c(""),S=()=>{o.post(route("admin.servicios.crear"),{onSuccess:()=>{i.value="Servicio añadido.",o.reset(),u.value=!1,h.Inertia.reload()}})},z=({file:s})=>{o.imagen=s,console.log("Archivo subido:",s)},E=()=>{o.id=null,o.nombre="",o.descripcion="",o.precio="",o.imagen=null,f.value=""},_=c(!1),u=c(!1),m=c(!1),A=()=>{E(),_.value=!0,u.value=!0,m.value=!1},f=c(""),M=s=>{m.value=!0,_.value=!1,u.value=!0,o.id=s.id,o.nombre=s.nombre||"",o.descripcion=s.descripcion||"",o.precio=s.precio||"",f.value=s.imagen?`/storage/${s.imagen}`:null},q=s=>{confirm("¿Está seguro de que deseas eliminar este servicio?")&&o.delete(route("admin.servicios.delete",s),{onSuccess:()=>{i.value="Servicio eliminado",setTimeout(()=>{i.value=""},2e3),h.Inertia.reload()},onError:()=>{alert("Hubo un error al intentar eliminar la promoción.")}})},B=()=>{confirm("¿Está seguro de que deseas editar este servicio?")&&o.put(route("admin.servicios.update",o.id),{onSuccess:()=>{i.value="Servicio editado correctamente.",u.value=!1,setTimeout(()=>{i.value=""},2e3),h.Inertia.reload()},onError:s=>{C.value=s.response.data.errors?s.response.data.errors:"Hubo un error al editar el producto.",alert("E")}})};return(s,e)=>{const N=g("upload-filled"),H=g("el-icon"),U=g("el-upload"),j=g("el-dialog"),v=g("el-button");return n(),a("div",P,[d(j,{modelValue:u.value,"onUpdate:modelValue":e[5]||(e[5]=r=>u.value=r),title:m.value?"Editar Servicio":"Añadir Servicio",width:"500","before-close":s.handleClose,class:"dark:bg-gray-900"},{default:p(()=>[t("form",{onSubmit:e[4]||(e[4]=F(r=>m.value?B():S(),["prevent"])),class:"max-w-md mx-auto"},[t("div",Z,[k(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=r=>l(o).nombre=r),id:"nombre",class:"block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer",placeholder:" ",required:""},null,512),[[w,l(o).nombre]]),e[6]||(e[6]=t("label",{for:"nombre",class:"peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"},"Nombre del servicio",-1))]),t("div",G,[e[7]||(e[7]=t("label",{for:"descripcion",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-gray-500"},"Descripción",-1)),k(t("textarea",{id:"descripcion",rows:"2","onUpdate:modelValue":e[1]||(e[1]=r=>l(o).descripcion=r),class:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Escribe la descripción del servicio aquí..."},null,512),[[w,l(o).descripcion]])]),t("div",J,[k(t("input",{type:"number",id:"precio",class:"block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer",placeholder:" ",required:"","onUpdate:modelValue":e[2]||(e[2]=r=>l(o).precio=r)},null,512),[[w,l(o).precio]]),e[8]||(e[8]=t("label",{for:"precio",class:"peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"},"Precio",-1))]),f.value?(n(),a("div",K,[t("img",{src:f.value,class:"w-33 h-33 object-cover mb-1"},null,8,O)])):y("",!0),t("div",Q,[d(U,{modelValue:l(o).imagen,"onUpdate:modelValue":e[3]||(e[3]=r=>l(o).imagen=r),class:"upload-demo dark:bg-gray-900",drag:"",style:{height:"160px"},"http-request":z,multiple:""},{default:p(()=>[d(H,{style:{"font-size":"20px"},class:"el-icon--upload"},{default:p(()=>[d(N)]),_:1}),e[9]||(e[9]=t("div",{class:"el-upload__text",style:{"font-size":"12px"}},[x(" Arrastra el archivo o "),t("em",null,"haz click aquí")],-1))]),_:1},8,["modelValue"])]),t("button",R,b(m.value?"Editar":"Añadir"),1)],32)]),_:1},8,["modelValue","title","before-close"]),i.value?(n(),a("div",W,b(i.value),1)):y("",!0),t("table",X,[t("thead",Y,[t("tr",null,[e[11]||(e[11]=t("th",{scope:"col",class:"px-6 py-3"}," Nombre del servicio ",-1)),e[12]||(e[12]=t("th",{scope:"col",class:"px-6 py-3"}," descripción ",-1)),e[13]||(e[13]=t("th",{scope:"col",class:"px-6 py-3"}," precio ",-1)),e[14]||(e[14]=t("th",{scope:"col",class:"px-6 py-3"}," imagen ",-1)),e[15]||(e[15]=t("th",{scope:"col",class:"px-6 py-3"}," Acciones ",-1)),t("td",ee,[d(v,{type:"primary",onClick:A},{default:p(()=>e[10]||(e[10]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})],-1),x(" Añadir Servicio")])),_:1})])])]),t("tbody",null,[(n(!0),a(T,null,D(l(V),r=>(n(),a("tr",{key:r.id,class:"bg-white border-b dark:bg-gray-800 dark:border-gray-700"},[t("th",te,b(r.nombre),1),t("td",oe,b(r.descripcion),1),t("td",re,b(r.precio)+" Bs. ",1),t("td",se,[r.imagen?(n(),a("figure",le,[r.imagen?(n(),a("img",{key:0,src:`/storage/${r.imagen}`,width:"50",height:"50"},null,8,ae)):y("",!0),e[16]||(e[16]=t("figcaption",{class:"mt-2 text-sm text-center text-gray-500 dark:text-gray-400"},null,-1))])):(n(),a("span",ne,"No hay imagen"))]),t("td",ie,[d(v,{type:"success",plain:"",onClick:L=>M(r)},{default:p(()=>e[17]||(e[17]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.35 3.836c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m8.9-4.414c.376.023.75.05 1.124.08 1.131.094 1.976 1.057 1.976 2.192V16.5A2.25 2.25 0 0 1 18 18.75h-2.25m-7.5-10.5H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V18.75m-7.5-10.5h6.375c.621 0 1.125.504 1.125 1.125v9.375m-8.25-3 1.5 1.5 3-3.75"})],-1),x(" Editar")])),_:2},1032,["onClick"])]),t("td",de,[d(v,{type:"danger",onClick:L=>q(r.id)},{default:p(()=>e[18]||(e[18]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})],-1),x(" Eliminar")])),_:2},1032,["onClick"])])]))),128))])])])}}};export{me as default};
