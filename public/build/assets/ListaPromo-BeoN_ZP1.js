import{i as P,C as A,r as u,j as b,c as n,b as c,f as m,t as p,d as B,a as t,F,k as L,u as a,o as d,l as g,v as x,w as M,h as y}from"./app-BBDfuzFB.js";import{d as k}from"./index-CVc_GQ5l.js";const z={class:"relative overflow-x-auto shadow-md sm:rounded-lg h-screen"},E={class:"relative z-0 w-full mb-5 group dark:bg-gray-800"},N={class:"mb-4 w-full md:w-1/3"},S={key:0,class:"bg-green-100 border border-green-400 text-green-700 px-4 py-2 rounded mb-4"},j={class:"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400"},D={class:"text-xs text-black-700 uppercase bg-blue-50 dark:bg-gray-700 dark:text-gray-400"},H={class:"px-6 py-4"},I={scope:"row",class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"},T={class:"px-6 py-4"},U={class:"px-6 py-4"},G={__name:"ListaPromo",setup(q){const w=P().props.promociones,r=A({descuento:"",fecha_final:""}),s=u(""),v=()=>{r.post(route("admin.promo.crear"),{onSuccess:()=>{s.value="Promoción añadida.",r.reset(),l.value=!1,k.Inertia.reload()}})},h=u(!1),l=u(!1),_=()=>{h.value=!0,l.value=!0},C=i=>{r.delete(route("admin.promo.delete",i),{onSuccess:()=>{s.value="Promoción eliminada",setTimeout(()=>{s.value=""},2e3),k.Inertia.reload()},onError:()=>{alert("Hubo un error al intentar eliminar la promoción.")}})};return(i,e)=>{const V=b("el-dialog"),f=b("el-button");return d(),n("div",z,[c(V,{modelValue:l.value,"onUpdate:modelValue":e[3]||(e[3]=o=>l.value=o),title:"Añadir Promoción",width:"500","before-close":i.handleClose,class:"dark:bg-gray-800"},{default:m(()=>[t("form",{onSubmit:e[2]||(e[2]=M(o=>v(),["prevent"])),enctype:"multipart/form-data",class:"max-w-md mx-auto"},[t("div",E,[g(t("input",{type:"number","onUpdate:modelValue":e[0]||(e[0]=o=>a(r).descuento=o),id:"descuento",class:"block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer",placeholder:" ",required:""},null,512),[[x,a(r).descuento]]),e[4]||(e[4]=t("label",{for:"descuento",class:"peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"},"Ingresa la cantidad del descuento",-1))]),t("div",N,[e[5]||(e[5]=t("label",{for:"fecha_final",class:"block text-sm font-medium text-gray-700 dark:text-gray-600"}," Fecha Final ",-1)),g(t("input",{type:"date",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:focus:border-blue-500 dark:focus:ring-blue-500",id:"fecha_final","onUpdate:modelValue":e[1]||(e[1]=o=>a(r).fecha_final=o),required:"",min:"{{ date('Y-m-d') }}"},null,512),[[x,a(r).fecha_final]])]),e[6]||(e[6]=t("button",{type:"submit",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},"Añadir",-1))],32)]),_:1},8,["modelValue","before-close"]),s.value?(d(),n("div",S,p(s.value),1)):B("",!0),t("table",j,[t("thead",D,[t("tr",null,[e[8]||(e[8]=t("th",{scope:"col",class:"px-6 py-3"}," Descuento de la promoción ",-1)),e[9]||(e[9]=t("th",{scope:"col",class:"px-6 py-3"}," Fin de la promoción ",-1)),t("td",H,[c(f,{type:"primary",onClick:_},{default:m(()=>e[7]||(e[7]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})],-1),y(" Añadir Promoción")])),_:1})])])]),t("tbody",null,[(d(!0),n(F,null,L(a(w),o=>(d(),n("tr",{key:o.id,class:"bg-white border-b dark:bg-gray-800 dark:border-gray-700"},[t("th",I,p(o.descuento)+" % ",1),t("td",T,p(o.fecha_final),1),t("td",U,[c(f,{type:"danger",onClick:$=>C(o.id)},{default:m(()=>e[10]||(e[10]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})],-1),y(" Eliminar")])),_:2},1032,["onClick"])])]))),128))])])])}}};export{G as default};
